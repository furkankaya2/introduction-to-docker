# BAD EXAMPLE: Poor Layer Caching
# Problem: Every code change rebuilds EVERYTHING including npm install!
# Build time after code change: 2-3 minutes ğŸ˜­

FROM node:18-alpine

WORKDIR /app

# âŒ BAD: Copying everything first!
# This means ANY file change (even a comment in code) will invalidate the cache
COPY . .

# âŒ This runs EVERY TIME because cache is already broken above
# Even if package.json didn't change!
RUN npm install

EXPOSE 3000

CMD ["node", "index.js"]

# Why this is BAD:
# - You change app.js â†’ COPY . . changes â†’ npm install runs again (120+ seconds!)
# - You change README.md â†’ COPY . . changes â†’ npm install runs again (120+ seconds!)  
# - You fix a typo â†’ COPY . . changes â†’ npm install runs again (120+ seconds!)
