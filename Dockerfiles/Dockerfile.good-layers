# GOOD EXAMPLE: Optimized Layer Caching
# Benefit: Only rebuilds what changed!
# Build time after code change: 3-5 seconds! ðŸš€

FROM node:18-alpine

WORKDIR /app

# âœ… GOOD: Copy package files FIRST (changes rarely)
COPY package*.json ./

# âœ… Install dependencies
# This layer is CACHED unless package.json changes
RUN npm install

# âœ… GOOD: Copy application code LAST (changes frequently)
# When you modify code, only this layer rebuilds
COPY . .

EXPOSE 3000

CMD ["node", "index.js"]

# Why this is GOOD:
# - You change app.js â†’ Only COPY . . rebuilds â†’ 3 seconds! âœ…
# - You change README.md â†’ Only COPY . . rebuilds â†’ 3 seconds! âœ…
# - package.json unchanged â†’ npm install uses cache â†’ Super fast! âœ…
# - package.json changed â†’ npm install runs (necessary) â†’ Still optimized!
